<!DOCTYPE html>
<html id="top" lang="en" ng-app="LightsApp">
    
<head>
    <!-- Title and image seen on browser bar -->
    <title>Smart City Lighting</title>
    <link rel="icon" 
        type="image/png" href="https://s3.amazonaws.com/blenderguru.com/uploads/2017/01/reference.jpg">

    <!-- Bootstrap stylesheet" -->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.css">
        
    <!-- Custom stylesheet -->
    <link href="css/app.css" rel="stylesheet"> 
        
    <!-- Font -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

    <!-- Button styling specific to pages -->
    <style>
        #map-selector { background-color: black; }
        #map-selector a { color: white; }
    </style>
        
</head>

<body ng-controller="MainController">

    <!-- Website header -->
    <header class="jumbotron" id="overview">
        <div class="container">
            <div class="col-sm-7">
                <h1></h1>
                <p></p>
            </div>
        </div>
    </header>

    <div class="container" id="middle_container">
        <section id="modules">
                    
            <!-- Buttons to toggle website view -->
            <div class="row">
                <div class="btn-group btn-group-lg" role="group" aria-label="..." id="view-buttons">
                    <button type="button" class="btn btn-default" id="list-selector">
                        <a href="ListView.html">List View</a>
                    </button>

                    <button type="button" class="btn btn-default" id="map-selector">
                        <a href="MapView.html">Map View</a>
                    </button>
                </div>    
            </div>
            
            <div id="map" class="col-md-9">
            </div>
            <div id="lampmark" ng-repeat="marker in markers">
                <a href="#" ng-click="openInfoWindow($event, marker)">{{marker.title}}</a>
            </div>
        
            <div id="map-list" class="col-md-3">
                <div class="list-group">
                    <div class="list-group-item" ng-repeat="(key, lamp) in lamps" data="{{key}}" ng-click="select(key)">
                        <h4>LAMP {{key}}</h4>
                        <p><strong>Address:</strong> {{lamp[0].address}}</p>
                        <p><strong>Operational:</strong> {{lamp[0].operational}}</p>
                        <p><strong>Latitude:</strong> {{lamp[0].latitude}}</p>
                        <p><strong>Longitude:</strong> {{lamp[0].longitude}}</p>
                        
                        <!-- Probably cannot access controller items within script tags of view, use ng-click instead 

                        <script>
                        $(".list-group-item").click(function() {
                            /*var lat1 = {{lamp[0].latitude}};
                            var long1 = {{lamp[0].longitude}};*/
                            
                            /* ^^^Need to be able to take lamp[0].latitude and return a NUMBER not a STRING*/
                            $that = $(this);
        
                            $previous = $that.hasClass('list-active');
        
                            $that.parent().find('.list-group-item').removeClass('list-active');
                            if (!($previous)) {
                                $that.addClass('list-active');
                            
                            
                                map = new google.maps.Map(document.getElementById('map'), {
                                    zoom: 16,
                                    center: {lat: 30.2, lng: -97.7}
                                });
                                
                            }
                        });
                        /* ^^^^ this needs to be able to only show one active class at a time*/
                            
                            
                        /*if({{key}} === {{selected}}){
                            this.addClass("list-active");
                            /* Add list-group-item class to the current div
                        };*/
                        </script>

                        -->
                    </div>
                </div>
            </div>

        </section>

    </div>
        
    <div class="footer">
        <div class="container">
            <p>Â© Smart City Lighting System. All rights reserved.</p>
        </div>
    </div>
    
    <!-- Google Maps -->
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCfGIkGoDHFF-jfiyK2axTvmhDJiirGMt4
&callback=initMap">
    </script>

    <!-- External libraries -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.1/angular.js"></script    
    
    <!-- Main js file -->
    <script type="text/javascript" src="js/app.js"></script>
        
</body>
    
</html>
